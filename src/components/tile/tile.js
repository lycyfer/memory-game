import React, { useEffect, useState } from 'react';
import './tile.css';

const Tile = ({ color, isOpen, onClick, isMatched }) => {
    const [isFlipped, setIsFlipped] = useState(isOpen);

    useEffect(() => {
        setIsFlipped(isOpen || isMatched);
    }, [isOpen, isMatched]);

    const handleClick = () => {
        if (!isOpen && !isMatched) {
            onClick();
        }
    };

    return (
        <div
            className={`tile ${isFlipped ? 'flipped' : ''} ${isMatched ? 'matched' : ''}`}
            style={{ '--tile-color': color }}
            onClick={handleClick}
        >
            <div className="tile-front">
                <svg width="70" height="54" viewBox="0 0 117 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19.76 20.78C19.5 21.06 19.09 21.35 18.53 21.65C17.97 21.93 17.32 22.19 16.58 22.43C15.86 22.67 15.12 22.86 14.36 23C13.6 23.16 12.88 23.24 12.2 23.24C10.4 23.24 8.78 22.98 7.34 22.46C5.9 21.92 4.67 21.18 3.65 20.24C2.63 19.28 1.85 18.15 1.31 16.85C0.77 15.55 0.5 14.13 0.5 12.59C0.5 10.57 0.8 8.82 1.4 7.34C2.02 5.84 2.85 4.6 3.89 3.62C4.95 2.62 6.16 1.88 7.52 1.4C8.9 0.919999 10.34 0.679999 11.84 0.679999C13.26 0.679999 14.56 0.839999 15.74 1.16C16.92 1.46 17.92 1.84 18.74 2.3L17.33 6.35C16.97 6.15 16.49 5.95 15.89 5.75C15.29 5.55 14.68 5.39 14.06 5.27C13.44 5.13 12.89 5.06 12.41 5.06C11.21 5.06 10.15 5.21 9.23 5.51C8.31 5.81 7.53 6.26 6.89 6.86C6.27 7.46 5.8 8.21 5.48 9.11C5.16 9.99 5 11.02 5 12.2C5 13.24 5.18 14.18 5.54 15.02C5.9 15.84 6.4 16.54 7.04 17.12C7.7 17.7 8.47 18.14 9.35 18.44C10.25 18.74 11.24 18.89 12.32 18.89C12.94 18.89 13.51 18.85 14.03 18.77C14.55 18.67 14.99 18.52 15.35 18.32V15.65H11.54V11.45H19.76V20.78ZM29.5316 23.36C28.3116 23.36 27.2016 23.12 26.2016 22.64C25.2216 22.14 24.4416 21.38 23.8616 20.36C23.2816 19.34 22.9916 18.04 22.9916 16.46C22.9916 14.98 23.2916 13.7 23.8916 12.62C24.4916 11.54 25.2816 10.71 26.2616 10.13C27.2416 9.53 28.2816 9.23 29.3816 9.23C30.6816 9.23 31.6616 9.45 32.3216 9.89C33.0016 10.31 33.5616 10.78 34.0016 11.3L33.8216 11.81L34.2116 9.89H38.1116V23H33.9116V20.15L34.2416 21.05C34.2016 21.05 34.0816 21.17 33.8816 21.41C33.6816 21.63 33.3816 21.9 32.9816 22.22C32.6016 22.52 32.1216 22.78 31.5416 23C30.9816 23.24 30.3116 23.36 29.5316 23.36ZM30.7316 19.94C31.2316 19.94 31.6816 19.87 32.0816 19.73C32.4816 19.57 32.8316 19.35 33.1316 19.07C33.4316 18.77 33.6916 18.4 33.9116 17.96V14.75C33.7516 14.31 33.5116 13.94 33.1916 13.64C32.8716 13.32 32.4916 13.08 32.0516 12.92C31.6116 12.74 31.1216 12.65 30.5816 12.65C29.9816 12.65 29.4216 12.81 28.9016 13.13C28.4016 13.43 28.0016 13.85 27.7016 14.39C27.4016 14.93 27.2516 15.55 27.2516 16.25C27.2516 16.95 27.4116 17.58 27.7316 18.14C28.0516 18.7 28.4716 19.14 28.9916 19.46C29.5316 19.78 30.1116 19.94 30.7316 19.94ZM46.2493 9.89L46.5793 12.2L46.5193 12.02C47.0393 11.14 47.6893 10.46 48.4693 9.98C49.2493 9.48 50.1893 9.23 51.2893 9.23C52.0093 9.23 52.6393 9.33 53.1793 9.53C53.7393 9.73 54.2093 10.03 54.5893 10.43C54.9693 10.81 55.2293 11.31 55.3693 11.93L55.2193 11.96C55.7793 11.14 56.4493 10.48 57.2293 9.98C58.0293 9.48 58.8593 9.23 59.7193 9.23C61.0193 9.23 62.0493 9.6 62.8093 10.34C63.5893 11.06 63.9893 12 64.0093 13.16V23H59.8393V14.9C59.8193 14.32 59.7293 13.85 59.5693 13.49C59.4093 13.11 59.0393 12.9 58.4593 12.86C57.7793 12.86 57.1993 13.1 56.7193 13.58C56.2593 14.04 55.9093 14.64 55.6693 15.38C55.4493 16.1 55.3393 16.85 55.3393 17.63V23H51.1393V14.9C51.1193 14.32 51.0093 13.85 50.8093 13.49C50.6293 13.11 50.2493 12.9 49.6693 12.86C49.0093 12.86 48.4493 13.1 47.9893 13.58C47.5493 14.04 47.2093 14.63 46.9693 15.35C46.7493 16.07 46.6393 16.81 46.6393 17.57V23H42.4393V9.89H46.2493ZM74.7877 23.36C73.1877 23.36 71.8277 23.06 70.7077 22.46C69.6077 21.86 68.7677 21.03 68.1877 19.97C67.6077 18.91 67.3177 17.69 67.3177 16.31C67.3177 14.99 67.6577 13.8 68.3377 12.74C69.0177 11.68 69.9277 10.84 71.0677 10.22C72.2077 9.58 73.4777 9.26 74.8777 9.26C76.7577 9.26 78.2977 9.81 79.4977 10.91C80.7177 11.99 81.5077 13.56 81.8677 15.62L71.6677 18.86L70.7377 16.58L78.1177 14.09L77.2477 14.48C77.0877 13.96 76.7977 13.51 76.3777 13.13C75.9777 12.73 75.3677 12.53 74.5477 12.53C73.9277 12.53 73.3777 12.68 72.8977 12.98C72.4377 13.26 72.0777 13.67 71.8177 14.21C71.5777 14.73 71.4577 15.35 71.4577 16.07C71.4577 16.89 71.6077 17.58 71.9077 18.14C72.2077 18.68 72.6177 19.09 73.1377 19.37C73.6577 19.65 74.2377 19.79 74.8777 19.79C75.3377 19.79 75.7777 19.71 76.1977 19.55C76.6377 19.39 77.0677 19.18 77.4877 18.92L79.3477 22.04C78.6477 22.44 77.8877 22.76 77.0677 23C76.2677 23.24 75.5077 23.36 74.7877 23.36ZM49.2793 41.99C49.2793 40.47 49.5693 39.03 50.1493 37.67C50.7293 36.31 51.5293 35.11 52.5493 34.07C53.5893 33.01 54.7893 32.18 56.1493

31.58C57.5093 30.98 58.9693 30.68 60.5293 30.68C62.0693 30.68 63.5193 30.98 64.8793 31.58C66.2393 32.18 67.4393 33.01 68.4793 34.07C69.5393 35.11 70.3593 36.31 70.9393 37.67C71.5393 39.03 71.8393 40.47 71.8393 41.99C71.8393 43.55 71.5393 45.01 70.9393 46.37C70.3593 47.73 69.5393 48.93 68.4793 49.97C67.4393 50.99 66.2393 51.79 64.8793 52.37C63.5193 52.95 62.0693 53.24 60.5293 53.24C58.9693 53.24 57.5093 52.95 56.1493 52.37C54.7893 51.79 53.5893 50.99 52.5493 49.97C51.5293 48.93 50.7293 47.73 50.1493 46.37C49.5693 45.01 49.2793 43.55 49.2793 41.99ZM53.7793 41.99C53.7793 42.97 53.9493 43.89 54.2893 44.75C54.6493 45.59 55.1393 46.34 55.7593 47C56.3993 47.64 57.1293 48.14 57.9493 48.5C58.7893 48.86 59.6993 49.04 60.6793 49.04C61.6193 49.04 62.4893 48.86 63.2893 48.5C64.1093 48.14 64.8193 47.64 65.4193 47C66.0193 46.34 66.4893 45.59 66.8293 44.75C67.1693 43.89 67.3393 42.97 67.3393 41.99C67.3393 40.99 67.1593 40.06 66.7993 39.2C66.4593 38.34 65.9793 37.59 65.3593 36.95C64.7593 36.29 64.0493 35.78 63.2293 35.42C62.4093 35.06 61.5193 34.88 60.5593 34.88C59.5993 34.88 58.7093 35.06 57.8893 35.42C57.0693 35.78 56.3493 36.29 55.7293 36.95C55.1093 37.59 54.6293 38.34 54.2893 39.2C53.9493 40.06 53.7793 40.99 53.7793 41.99ZM81.4862 53.27L73.6262 39.89H78.6062L83.0762 48.95L80.4962 48.86L84.3662 39.89H89.0462L81.6062 53.27H81.4862ZM97.5221 53.36C95.9221 53.36 94.5621 53.06 93.4421 52.46C92.3421 51.86 91.5021 51.03 90.9221 49.97C90.3421 48.91 90.0521 47.69 90.0521 46.31C90.0521 44.99 90.3921 43.8 91.0721 42.74C91.7521 41.68 92.6621 40.84 93.8021 40.22C94.9421 39.58 96.2121 39.26 97.6121 39.26C99.4921 39.26 101.032 39.81 102.232 40.91C103.452 41.99 104.242 43.56 104.602 45.62L94.4021 48.86L93.4721 46.58L100.852 44.09L99.9821 44.48C99.8221 43.96 99.5321 43.51 99.1121 43.13C98.7121 42.73 98.1021 42.53 97.2821 42.53C96.6621 42.53 96.1121 42.68 95.6321 42.98C95.1721 43.26 94.8121 43.67 94.5521 44.21C94.3121 44.73 94.1921 45.35 94.1921 46.07C94.1921 46.89 94.3421 47.58 94.6421 48.14C94.9421 48.68 95.3521 49.09 95.8721 49.37C96.3921 49.65 96.9721 49.79 97.6121 49.79C98.0721 49.79 98.5121 49.71 98.9321 49.55C99.3721 49.39 99.8021 49.18 100.222 48.92L102.082 52.04C101.382 52.44 100.622 52.76 99.8021 53C99.0021 53.24 98.2421 53.36 97.5221 53.36ZM111.434 39.89L111.824 43.49L111.734 42.95C112.114 42.17 112.634 41.51 113.294 40.97C113.954 40.41 114.604 39.98 115.244 39.68C115.904 39.38 116.404 39.23 116.744 39.23L116.534 43.43C115.554 43.31 114.714 43.47 114.014 43.91C113.314 44.35 112.774 44.93 112.394 45.65C112.014 46.37 111.824 47.11 111.824 47.87V53H107.654V39.89H111.434Z" fill="url(#paint0_linear_269_2)" />
                    <defs>
                        <linearGradient id="paint0_linear_269_2" x1="-1" y1="10" x2="239.434" y2="85.3628" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#8F00FF" />
                            <stop offset="1" stop-color="white" />
                        </linearGradient>
                    </defs>
                </svg></div>
            <div className="tile-back"></div>
        </div>
    );
};

export default Tile;
